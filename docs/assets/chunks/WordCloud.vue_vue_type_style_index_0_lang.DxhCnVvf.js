import{b as St}from"./config_blog.C-vqDV8L.js";import{g as Et,c as Ft}from"./theme.B997hKR1.js";import{d as yt,g as Wt,c as Pt,h as At,A as Rt,ak as zt,o as Ot,a as Lt}from"./framework.CJwJD4JI.js";var mt={exports:{}};/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2019 Tim Guan-tin Chien and contributors.
 * Released under the MIT license
 */(function(Z){window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var w=[void 0],z="zero-timeout-message",H=function(C){var k=w.length;return w.push(C),window.postMessage(z+k.toString(36),"*"),k};return window.addEventListener("message",function(C){if(!(typeof C.data!="string"||C.data.substr(0,z.length)!==z)){C.stopImmediatePropagation();var k=parseInt(C.data.substr(z.length),36);w[k]&&(w[k](),w[k]=void 0)}},!0),window.clearImmediate=function(C){w[C]&&(w[C]=void 0)},H}()||function(w){window.setTimeout(w,0)}}()),window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(w){window.clearTimeout(w)}}()),function(D){var R=function(){var i=document.createElement("canvas");if(!i||!i.getContext)return!1;var s=i.getContext("2d");return!(!s||!s.getImageData||!s.fillText||!Array.prototype.some||!Array.prototype.push)}(),w=function(){if(R){for(var i=document.createElement("canvas").getContext("2d"),s=20,d,e;s;){if(i.font=s.toString(10)+"px sans-serif",i.measureText("Ｗ").width===d&&i.measureText("m").width===e)return s+1;d=i.measureText("Ｗ").width,e=i.measureText("m").width,s--}return 0}}(),z=function(k){if(Array.isArray(k)){var i=k.slice();return i.splice(0,2),i}else return[]},H=function(i){for(var s,d,e=i.length;e;)s=Math.floor(Math.random()*e),d=i[--e],i[e]=i[s],i[s]=d;return i},E={},C=function(i,s){if(!R)return;var d=Math.floor(Math.random()*Date.now());Array.isArray(i)||(i=[i]),i.forEach(function(f,t){if(typeof f=="string"){if(i[t]=document.getElementById(f),!i[t])throw new Error("The element id specified is not found.")}else if(!f.tagName&&!f.appendChild)throw new Error("You must pass valid HTML elements, or ID of the element.")});var e={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "微軟正黑體", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,shrinkToFit:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationSteps:0,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null};if(s)for(var $ in s)$ in e&&(e[$]=s[$]);if(typeof e.weightFactor!="function"){var gt=e.weightFactor;e.weightFactor=function(t){return t*gt}}if(typeof e.shape!="function")switch(e.shape){case"circle":default:e.shape="circle";break;case"cardioid":e.shape=function(t){return 1-Math.sin(t)};break;case"diamond":e.shape=function(t){var a=t%(2*Math.PI/4);return 1/(Math.cos(a)+Math.sin(a))};break;case"square":e.shape=function(t){return Math.min(1/Math.abs(Math.cos(t)),1/Math.abs(Math.sin(t)))};break;case"triangle-forward":e.shape=function(t){var a=t%(2*Math.PI/3);return 1/(Math.cos(a)+Math.sqrt(3)*Math.sin(a))};break;case"triangle":case"triangle-upright":e.shape=function(t){var a=(t+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(a)+Math.sqrt(3)*Math.sin(a))};break;case"pentagon":e.shape=function(t){var a=(t+.955)%(2*Math.PI/5);return 1/(Math.cos(a)+.726543*Math.sin(a))};break;case"star":e.shape=function(t){var a=(t+.955)%(2*Math.PI/10);return(t+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-a)+3.07768*Math.sin(2*Math.PI/10-a)):1/(Math.cos(a)+3.07768*Math.sin(a))};break}e.gridSize=Math.max(Math.floor(e.gridSize),4);var o=e.gridSize,lt=o-e.maskGapWidth,j=Math.abs(e.maxRotation-e.minRotation),J=Math.abs(Math.floor(e.rotationSteps)),K=Math.min(e.maxRotation,e.minRotation),P,b,y,X,N,ft,Y;function ct(f,t){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(t-f)+f).toFixed()+"%)"}switch(e.color){case"random-dark":Y=function(){return ct(10,50)};break;case"random-light":Y=function(){return ct(50,90)};break;default:typeof e.color=="function"&&(Y=e.color);break}var _;typeof e.fontWeight=="function"&&(_=e.fontWeight);var Q=null;typeof e.classes=="function"&&(Q=e.classes);var V=!1,tt=[],et,ut=function(t){var a=t.currentTarget,r=a.getBoundingClientRect(),l,n;t.touches?(l=t.touches[0].clientX,n=t.touches[0].clientY):(l=t.clientX,n=t.clientY);var c=l-r.left,h=n-r.top,g=Math.floor(c*(a.width/r.width||1)/o),u=Math.floor(h*(a.height/r.height||1)/o);return tt[g][u]},dt=function(t){var a=ut(t);if(et!==a){if(et=a,!a){e.hover(void 0,void 0,t);return}e.hover(a.item,a.dimension,t)}},ht=function(t){var a=ut(t);a&&(e.click(a.item,a.dimension,t),t.preventDefault())},at=[],wt=function(t){if(at[t])return at[t];var a=t*8,r=a,l=[];for(t===0&&l.push([X[0],X[1],0]);r--;){var n=1;e.shape!=="circle"&&(n=e.shape(r/a*2*Math.PI)),l.push([X[0]+t*n*Math.cos(-r/a*2*Math.PI),X[1]+t*n*Math.sin(-r/a*2*Math.PI)*e.ellipticity,r/a*2*Math.PI])}return at[t]=l,l},rt=function(){return e.abortThreshold>0&&new Date().getTime()-ft>e.abortThreshold},pt=function(){return e.rotateRatio===0||Math.random()>e.rotateRatio?0:j===0?K:J>0?K+Math.floor(Math.random()*J)*j/(J-1):K+Math.random()*j},Mt=function(t,a,r,l){var n=e.weightFactor(a);if(n<=e.minSize)return!1;var c=1;n<w&&(c=function(){for(var ot=2;ot*n<w;)ot+=2;return ot}());var h;_?h=_(t,a,n,l):h=e.fontWeight;var g=document.createElement("canvas"),u=g.getContext("2d",{willReadFrequently:!0});u.font=h+" "+(n*c).toString(10)+"px "+e.fontFamily;var S=u.measureText(t).width/c,v=Math.max(n*c,u.measureText("m").width,u.measureText("Ｗ").width)/c,M=S+v*2,T=v*3,x=Math.ceil(M/o),W=Math.ceil(T/o);M=x*o,T=W*o;var m=-S/2,p=-v*.4,I=Math.ceil((M*Math.abs(Math.sin(r))+T*Math.abs(Math.cos(r)))/o),F=Math.ceil((M*Math.abs(Math.cos(r))+T*Math.abs(Math.sin(r)))/o),O=F*o,G=I*o;g.setAttribute("width",O),g.setAttribute("height",G),u.scale(1/c,1/c),u.translate(O*c/2,G*c/2),u.rotate(-r),u.font=h+" "+(n*c).toString(10)+"px "+e.fontFamily,u.fillStyle="#000",u.textBaseline="middle",u.fillText(t,m*c,(p+n*.5)*c);var U=u.getImageData(0,0,O,G).data;if(rt())return!1;for(var vt=[],B=F,L,it,nt,A=[I/2,F/2,I/2,F/2];B--;)for(L=I;L--;){nt=o;t:for(;nt--;)for(it=o;it--;)if(U[((L*o+nt)*O+(B*o+it))*4+3]){vt.push([B,L]),B<A[3]&&(A[3]=B),B>A[1]&&(A[1]=B),L<A[0]&&(A[0]=L),L>A[2]&&(A[2]=L);break t}}return{mu:c,occupied:vt,bounds:A,gw:F,gh:I,fillTextOffsetX:m,fillTextOffsetY:p,fillTextWidth:S,fillTextHeight:v,fontSize:n}},Tt=function(t,a,r,l,n){for(var c=n.length;c--;){var h=t+n[c][0],g=a+n[c][1];if(h>=b||g>=y||h<0||g<0){if(!e.drawOutOfBound)return!1;continue}if(!P[h][g])return!1}return!0},xt=function(t,a,r,l,n,c,h,g,u,S){var v=r.fontSize,M;Y?M=Y(l,n,v,c,h,S):M=e.color;var T;_?T=_(l,n,v,S):T=e.fontWeight;var x;Q?x=Q(l,n,v,S):x=e.classes,i.forEach(function(W){if(W.getContext){var m=W.getContext("2d"),p=r.mu;m.save(),m.scale(1/p,1/p),m.font=T+" "+(v*p).toString(10)+"px "+e.fontFamily,m.fillStyle=M,m.translate((t+r.gw/2)*o*p,(a+r.gh/2)*o*p),g!==0&&m.rotate(-g),m.textBaseline="middle",m.fillText(l,r.fillTextOffsetX*p,(r.fillTextOffsetY+v*.5)*p),m.restore()}else{var I=document.createElement("span"),F="";F="rotate("+-g/Math.PI*180+"deg) ",r.mu!==1&&(F+="translateX(-"+r.fillTextWidth/4+"px) scale("+1/r.mu+")");var O={position:"absolute",display:"block",font:T+" "+v*r.mu+"px "+e.fontFamily,left:(t+r.gw/2)*o+r.fillTextOffsetX+"px",top:(a+r.gh/2)*o+r.fillTextOffsetY+"px",width:r.fillTextWidth+"px",height:r.fillTextHeight+"px",lineHeight:v+"px",whiteSpace:"nowrap",transform:F,webkitTransform:F,msTransform:F,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};M&&(O.color=M),I.textContent=l;for(var G in O)I.style[G]=O[G];if(u)for(var U in u)I.setAttribute(U,u[U]);x&&(I.className+=x),W.appendChild(I)}})},Ct=function(t,a,r,l,n){if(!(t>=b||a>=y||t<0||a<0)){if(P[t][a]=!1,r){var c=i[0].getContext("2d");c.fillRect(t*o,a*o,lt,lt)}V&&(tt[t][a]={item:n,dimension:l})}},kt=function(t,a,r,l,n,c){var h=n.occupied,g=e.drawMask,u;g&&(u=i[0].getContext("2d"),u.save(),u.fillStyle=e.maskColor);var S;if(V){var v=n.bounds;S={x:(t+v[3])*o,y:(a+v[0])*o,w:(v[1]-v[3]+1)*o,h:(v[2]-v[0]+1)*o}}for(var M=h.length;M--;){var T=t+h[M][0],x=a+h[M][1];T>=b||x>=y||T<0||x<0||Ct(T,x,g,S,c)}g&&u.restore()},It=function f(t){var a,r,l;Array.isArray(t)?(a=t[0],r=t[1]):(a=t.word,r=t.weight,l=t.attributes);var n=pt(),c=z(t),h=Mt(a,r,n,c);if(!h||rt())return!1;if(!e.drawOutOfBound&&!e.shrinkToFit){var g=h.bounds;if(g[1]-g[3]+1>b||g[2]-g[0]+1>y)return!1}for(var u=N+1,S=function(T){var x=Math.floor(T[0]-h.gw/2),W=Math.floor(T[1]-h.gh/2),m=h.gw,p=h.gh;return Tt(x,W,m,p,h.occupied)?(xt(x,W,h,a,r,N-u,T[2],n,l,c),kt(x,W,m,p,h,t),!0):!1};u--;){var v=wt(N-u);e.shuffle&&(v=[].concat(v),H(v));var M=v.some(S);if(M)return!0}return e.shrinkToFit?(Array.isArray(t)?t[1]=t[1]*3/4:t.weight=t.weight*3/4,f(t)):!1},q=function(t,a,r){if(a)return!i.some(function(l){var n=new CustomEvent(t,{detail:r||{}});return!l.dispatchEvent(n)},this);i.forEach(function(l){var n=new CustomEvent(t,{detail:r||{}});l.dispatchEvent(n)},this)},bt=function(){var t=i[0];if(t.getContext)b=Math.ceil(t.width/o),y=Math.ceil(t.height/o);else{var a=t.getBoundingClientRect();b=Math.ceil(a.width/o),y=Math.ceil(a.height/o)}if(q("wordcloudstart",!0)){X=e.origin?[e.origin[0]/o,e.origin[1]/o]:[b/2,y/2],N=Math.floor(Math.sqrt(b*b+y*y)),P=[];var r,l,n;if(!t.getContext||e.clearCanvas)for(i.forEach(function(m){if(m.getContext){var p=m.getContext("2d");p.fillStyle=e.backgroundColor,p.clearRect(0,0,b*(o+1),y*(o+1)),p.fillRect(0,0,b*(o+1),y*(o+1))}else m.textContent="",m.style.backgroundColor=e.backgroundColor,m.style.position="relative"}),r=b;r--;)for(P[r]=[],l=y;l--;)P[r][l]=!0;else{var c=document.createElement("canvas").getContext("2d");c.fillStyle=e.backgroundColor,c.fillRect(0,0,1,1);var h=c.getImageData(0,0,1,1).data,g=t.getContext("2d").getImageData(0,0,b*o,y*o).data;r=b;for(var u,S;r--;)for(P[r]=[],l=y;l--;){S=o;t:for(;S--;)for(u=o;u--;)for(n=4;n--;)if(g[((l*o+S)*b*o+(r*o+u))*4+n]!==h[n]){P[r][l]=!1;break t}P[r][l]!==!1&&(P[r][l]=!0)}g=c=h=void 0}if(e.hover||e.click){for(V=!0,r=b+1;r--;)tt[r]=[];e.hover&&t.addEventListener("mousemove",dt),e.click&&(t.addEventListener("click",ht),t.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),t.addEventListener("wordcloudstart",function m(){t.removeEventListener("wordcloudstart",m),t.removeEventListener("mousemove",dt),t.removeEventListener("click",ht),et=void 0})}n=0;var v,M;e.wait!==0?(v=window.setTimeout,M=window.clearTimeout):(v=window.setImmediate,M=window.clearImmediate);var T=function(p,I){i.forEach(function(F){F.addEventListener(p,I)},this)},x=function(p,I){i.forEach(function(F){F.removeEventListener(p,I)},this)},W=function m(){x("wordcloudstart",m),M(E[d])};T("wordcloudstart",W),E[d]=v(function m(){if(n>=e.list.length){M(E[d]),q("wordcloudstop",!1),x("wordcloudstart",W),delete E[d];return}ft=new Date().getTime();var p=It(e.list[n]),I=!q("wordclouddrawn",!0,{item:e.list[n],drawn:p});if(rt()||I){M(E[d]),e.abort(),q("wordcloudabort",!1),q("wordcloudstop",!1),x("wordcloudstart",W),delete E[d];return}n++,E[d]=v(m,e.wait)},e.wait)}};bt()};C.isSupported=R,C.minFontSize=w,C.stop=function(){if(E)for(var i in E)window.clearImmediate(E[i])},Z.exports?Z.exports=C:D.WordCloud=C}(Ft)})(mt);var Bt=mt.exports;const st=Et(Bt),Gt={id:"wordcloud-container"},_t=yt({__name:"WordCloud",props:{defaultActiveTag:{type:String}},emits:["onSelect"],setup(Z,{emit:D}){const R=Z,w=Wt(),z=D,H=Pt(()=>{const i=St.map(d=>d.tags??[]).flat(),s={};return i.forEach(d=>{s[d]?s[d]++:s[d]=1}),Object.entries(s).map(([d,e])=>({name:d,value:e}))});function E(i){let s=0;for(let d=0;d<i.length;d++){const e=i.charCodeAt(d);s=(s<<5)-s+e,s|=0}return s}function C(i){const s=Math.abs(i)%360,d=20+Math.abs(i)%30;return`hsl(${s}, 100%, ${d}%)`}const k=()=>{st.stop();const i=document.getElementById("wordcloud-container");i&&st(i,{list:H.value.map(s=>[s.name,Math.max(Math.min(s.value,10),1)+20]),rotateRatio:0,gridSize:31,shrinkToFit:!0,shuffle:!1,classes:s=>w.value?s===w.value?"cloud-tag-active":"cloud-tag":"cloud-tag-all",color(s){const d=E(s);return C(d)},click:s=>{s[0]!==w.value?w.value=s[0]:w.value=void 0,z("onSelect",w.value)}})};return At(()=>{w.value=R.defaultActiveTag,k()}),Rt(w,()=>{k()}),zt(()=>{st.stop()}),(i,s)=>(Ot(),Lt("div",Gt))}});export{_t as _};
