import{e as Y,d as C,_ as Qe,c as Me,b as D,f as Ie,a as bt}from"./LoadingOutlined.DoHDFklb.js";import{r as t,b as Ke}from"./theme.B997hKR1.js";import{R as et}from"./index.DoUKsC-B.js";import{w as B,f as Mt,e as pt,a6 as yt,x as Re,l as Ge}from"./motion.Bn6UWlSE.js";var tt=t.forwardRef(function(e,s){var i=e.height,l=e.offsetY,v=e.offsetX,n=e.children,u=e.prefixCls,S=e.onInnerResize,m=e.innerProps,M=e.rtl,g=e.extra,r={},c={display:"flex",flexDirection:"column"};return l!==void 0&&(r={height:i,position:"relative",overflow:"hidden"},c=Y(Y({},c),{},C(C(C(C(C({transform:"translateY(".concat(l,"px)")},M?"marginRight":"marginLeft",-v),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:r},t.createElement(et,{onResize:function(R){var h=R.offsetHeight;h&&S&&S()}},t.createElement("div",Qe({style:c,className:Me(C({},"".concat(u,"-holder-inner"),u)),ref:s},m),n,g)))});tt.displayName="Filler";function Ue(e,s){var i="touches"in e?e.touches[0]:e;return i[s?"pageX":"pageY"]}var Ze=t.forwardRef(function(e,s){var i=e.prefixCls,l=e.rtl,v=e.scrollOffset,n=e.scrollRange,u=e.onStartMove,S=e.onStopMove,m=e.onScroll,M=e.horizontal,g=e.spinSize,r=e.containerSize,c=e.style,d=e.thumbStyle,R=t.useState(!1),h=D(R,2),f=h[0],p=h[1],y=t.useState(null),H=D(y,2),_=H[0],W=H[1],X=t.useState(null),x=D(X,2),j=x[0],I=x[1],P=!l,k=t.useRef(),Q=t.useRef(),E=t.useState(!1),$=D(E,2),ee=$[0],te=$[1],G=t.useRef(),T=function(){clearTimeout(G.current),te(!0),G.current=setTimeout(function(){te(!1)},3e3)},U=n-r||0,ie=r-g||0,Z=t.useMemo(function(){if(v===0||U===0)return 0;var w=v/U;return w*ie},[v,U,ie]),re=function(L){L.stopPropagation(),L.preventDefault()},q=t.useRef({top:Z,dragging:f,pageY:_,startTop:j});q.current={top:Z,dragging:f,pageY:_,startTop:j};var le=function(L){p(!0),W(Ue(L,M)),I(q.current.top),u(),L.stopPropagation(),L.preventDefault()};t.useEffect(function(){var w=function(se){se.preventDefault()},L=k.current,N=Q.current;return L.addEventListener("touchstart",w),N.addEventListener("touchstart",le),function(){L.removeEventListener("touchstart",w),N.removeEventListener("touchstart",le)}},[]);var ue=t.useRef();ue.current=U;var be=t.useRef();be.current=ie,t.useEffect(function(){if(f){var w,L=function(se){var fe=q.current,pe=fe.dragging,ye=fe.pageY,xe=fe.startTop;if(B.cancel(w),pe){var ne=Ue(se,M)-ye,ve=xe;!P&&M?ve-=ne:ve+=ne;var de=ue.current,ae=be.current,Ee=ae?ve/ae:0,V=Math.ceil(Ee*de);V=Math.max(V,0),V=Math.min(V,de),w=B(function(){m(V,M)})}},N=function(){p(!1),S()};return window.addEventListener("mousemove",L),window.addEventListener("touchmove",L),window.addEventListener("mouseup",N),window.addEventListener("touchend",N),function(){window.removeEventListener("mousemove",L),window.removeEventListener("touchmove",L),window.removeEventListener("mouseup",N),window.removeEventListener("touchend",N),B.cancel(w)}}},[f]),t.useEffect(function(){T()},[v]),t.useImperativeHandle(s,function(){return{delayHidden:T}});var A="".concat(i,"-scrollbar"),O={position:"absolute",visibility:ee?null:"hidden"},F={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return M?(O.height=8,O.left=0,O.right=0,O.bottom=0,F.height="100%",F.width=g,P?F.left=Z:F.right=Z):(O.width=8,O.top=0,O.bottom=0,P?O.right=0:O.left=0,F.width="100%",F.height=g,F.top=Z),t.createElement("div",{ref:k,className:Me(A,C(C(C({},"".concat(A,"-horizontal"),M),"".concat(A,"-vertical"),!M),"".concat(A,"-visible"),ee)),style:Y(Y({},O),c),onMouseDown:re,onMouseMove:T},t.createElement("div",{ref:Q,className:Me("".concat(A,"-thumb"),C({},"".concat(A,"-thumb-moving"),f)),style:Y(Y({},F),d),onMouseDown:le}))});function xt(e){var s=e.children,i=e.setRef,l=t.useCallback(function(v){i(v)},[]);return t.cloneElement(s,{ref:l})}function Et(e,s,i,l,v,n,u){var S=u.getKey;return e.slice(s,i+1).map(function(m,M){var g=s+M,r=n(m,g,{style:{width:l}}),c=S(m);return t.createElement(xt,{key:c,setRef:function(R){return v(m,R)}},r)})}var wt=function(){function e(){pt(this,e),C(this,"maps",void 0),C(this,"id",0),this.maps=Object.create(null)}return Mt(e,[{key:"set",value:function(i,l){this.maps[i]=l,this.id+=1}},{key:"get",value:function(i){return this.maps[i]}}]),e}();function zt(e,s,i){var l=t.useState(0),v=D(l,2),n=v[0],u=v[1],S=t.useRef(new Map),m=t.useRef(new wt),M=t.useRef();function g(){B.cancel(M.current)}function r(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;g();var R=function(){S.current.forEach(function(f,p){if(f&&f.offsetParent){var y=yt(f),H=y.offsetHeight;m.current.get(p)!==H&&m.current.set(p,y.offsetHeight)}}),u(function(f){return f+1})};d?R():M.current=B(R)}function c(d,R){var h=e(d);S.current.get(h),R?(S.current.set(h,R),r()):S.current.delete(h)}return t.useEffect(function(){return g},[]),[c,r,m.current,n]}var _t=10;function Lt(e,s,i,l,v,n,u,S){var m=t.useRef(),M=t.useState(null),g=D(M,2),r=g[0],c=g[1];return Re(function(){if(r&&r.times<_t){if(!e.current){c(function(U){return Y({},U)});return}n();var d=r.targetAlign,R=r.originAlign,h=r.index,f=r.offset,p=e.current.clientHeight,y=!1,H=d,_=null;if(p){for(var W=d||R,X=0,x=0,j=0,I=Math.min(s.length-1,h),P=0;P<=I;P+=1){var k=v(s[P]);x=X;var Q=i.get(k);j=x+(Q===void 0?l:Q),X=j}for(var E=W==="top"?f:p-f,$=I;$>=0;$-=1){var ee=v(s[$]),te=i.get(ee);if(te===void 0){y=!0;break}if(E-=te,E<=0)break}switch(W){case"top":_=x-f;break;case"bottom":_=j-p+f;break;default:{var G=e.current.scrollTop,T=G+p;x<G?H="top":j>T&&(H="bottom")}}_!==null&&u(_),_!==r.lastTop&&(y=!0)}y&&c(Y(Y({},r),{},{times:r.times+1,targetAlign:H,lastTop:_}))}},[r,e.current]),function(d){if(d==null){S();return}if(B.cancel(m.current),typeof d=="number")u(d);else if(d&&Ie(d)==="object"){var R,h=d.align;"index"in d?R=d.index:R=s.findIndex(function(y){return v(y)===d.key});var f=d.offset,p=f===void 0?0:f;c({times:0,index:R,offset:p,originAlign:h})}}}function Dt(e,s,i){var l=e.length,v=s.length,n,u;if(l===0&&v===0)return null;l<v?(n=e,u=s):(n=s,u=e);var S={__EMPTY_ITEM__:!0};function m(R){return R!==void 0?i(R):S}for(var M=null,g=Math.abs(l-v)!==1,r=0;r<u.length;r+=1){var c=m(n[r]),d=m(u[r]);if(c!==d){M=r,g=g||c!==m(u[r+1]);break}}return M===null?null:{index:M,multiple:g}}function Ht(e,s,i){var l=t.useState(e),v=D(l,2),n=v[0],u=v[1],S=t.useState(null),m=D(S,2),M=m[0],g=m[1];return t.useEffect(function(){var r=Dt(n||[],e||[],s);(r==null?void 0:r.index)!==void 0&&g(e[r.index]),u(e)},[e]),[M]}var qe=(typeof navigator>"u"?"undefined":Ie(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const rt=function(e,s){var i=t.useRef(!1),l=t.useRef(null);function v(){clearTimeout(l.current),i.current=!0,l.current=setTimeout(function(){i.current=!1},50)}var n=t.useRef({top:e,bottom:s});return n.current.top=e,n.current.bottom=s,function(u){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,m=u<0&&n.current.top||u>0&&n.current.bottom;return S&&m?(clearTimeout(l.current),i.current=!1):(!m||i.current)&&v(),!i.current&&m}};function Tt(e,s,i,l,v){var n=t.useRef(0),u=t.useRef(null),S=t.useRef(null),m=t.useRef(!1),M=rt(s,i);function g(f,p){B.cancel(u.current),n.current+=p,S.current=p,!M(p)&&(qe||f.preventDefault(),u.current=B(function(){var y=m.current?10:1;v(n.current*y),n.current=0}))}function r(f,p){v(p,!0),qe||f.preventDefault()}var c=t.useRef(null),d=t.useRef(null);function R(f){if(e){B.cancel(d.current),d.current=B(function(){c.current=null},2);var p=f.deltaX,y=f.deltaY,H=f.shiftKey,_=p,W=y;(c.current==="sx"||!c.current&&H&&y&&!p)&&(_=y,W=0,c.current="sx");var X=Math.abs(_),x=Math.abs(W);c.current===null&&(c.current=l&&X>x?"x":"y"),c.current==="y"?g(f,W):r(f,_)}}function h(f){e&&(m.current=f.detail===S.current)}return[R,h]}var Ct=14/15;function It(e,s,i){var l=t.useRef(!1),v=t.useRef(0),n=t.useRef(null),u=t.useRef(null),S,m=function(c){if(l.current){var d=Math.ceil(c.touches[0].pageY),R=v.current-d;v.current=d,i(R)&&c.preventDefault(),clearInterval(u.current),u.current=setInterval(function(){R*=Ct,(!i(R,!0)||Math.abs(R)<=.1)&&clearInterval(u.current)},16)}},M=function(){l.current=!1,S()},g=function(c){S(),c.touches.length===1&&!l.current&&(l.current=!0,v.current=Math.ceil(c.touches[0].pageY),n.current=c.target,n.current.addEventListener("touchmove",m),n.current.addEventListener("touchend",M))};S=function(){n.current&&(n.current.removeEventListener("touchmove",m),n.current.removeEventListener("touchend",M))},Re(function(){return e&&s.current.addEventListener("touchstart",g),function(){var r;(r=s.current)===null||r===void 0||r.removeEventListener("touchstart",g),S(),clearInterval(u.current)}},[e])}var Pt=20;function Je(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=e/s*e;return isNaN(i)&&(i=0),i=Math.max(i,Pt),Math.floor(i)}function kt(e,s,i,l){var v=t.useMemo(function(){return[new Map,[]]},[e,i.id,l]),n=D(v,2),u=n[0],S=n[1],m=function(g){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g,c=u.get(g),d=u.get(r);if(c===void 0||d===void 0)for(var R=e.length,h=S.length;h<R;h+=1){var f,p=e[h],y=s(p);u.set(y,h);var H=(f=i.get(y))!==null&&f!==void 0?f:l;if(S[h]=(S[h-1]||0)+H,y===g&&(c=h),y===r&&(d=h),c!==void 0&&d!==void 0)break}return{top:S[c-1]||0,bottom:S[d]}};return m}var Ot=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],$t=[],Nt={overflowY:"auto",overflowAnchor:"none"};function Yt(e,s){var i=e.prefixCls,l=i===void 0?"rc-virtual-list":i,v=e.className,n=e.height,u=e.itemHeight,S=e.fullHeight,m=S===void 0?!0:S,M=e.style,g=e.data,r=e.children,c=e.itemKey,d=e.virtual,R=e.direction,h=e.scrollWidth,f=e.component,p=f===void 0?"div":f,y=e.onScroll,H=e.onVirtualScroll,_=e.onVisibleChange,W=e.innerProps,X=e.extraRender,x=e.styles,j=bt(e,Ot),I=!!(d!==!1&&n&&u),P=I&&g&&(u*g.length>n||!!h),k=R==="rtl",Q=Me(l,C({},"".concat(l,"-rtl"),k),v),E=g||$t,$=t.useRef(),ee=t.useRef(),te=t.useState(0),G=D(te,2),T=G[0],U=G[1],ie=t.useState(0),Z=D(ie,2),re=Z[0],q=Z[1],le=t.useState(!1),ue=D(le,2),be=ue[0],A=ue[1],O=function(){A(!0)},F=function(){A(!1)},w=t.useCallback(function(a){return typeof c=="function"?c(a):a==null?void 0:a[c]},[c]),L={getKey:w};function N(a){U(function(o){var b;typeof a=="function"?b=a(o):b=a;var z=ut(b);return $.current.scrollTop=z,z})}var ce=t.useRef({start:0,end:E.length}),se=t.useRef(),fe=Ht(E,w),pe=D(fe,1),ye=pe[0];se.current=ye;var xe=zt(w),ne=D(xe,4),ve=ne[0],de=ne[1],ae=ne[2],Ee=ne[3],V=t.useMemo(function(){if(!I)return{scrollHeight:void 0,start:0,end:E.length-1,offset:void 0};if(!P){var a;return{scrollHeight:((a=ee.current)===null||a===void 0?void 0:a.offsetHeight)||0,start:0,end:E.length-1,offset:void 0}}for(var o=0,b,z,J,mt=E.length,ge=0;ge<mt;ge+=1){var gt=E[ge],Rt=w(gt),Ae=ae.get(Rt),Ce=o+(Ae===void 0?u:Ae);Ce>=T&&b===void 0&&(b=ge,z=o),Ce>T+n&&J===void 0&&(J=ge),o=Ce}return b===void 0&&(b=0,z=0,J=Math.ceil(n/u)),J===void 0&&(J=E.length-1),J=Math.min(J+1,E.length-1),{scrollHeight:o,start:b,end:J,offset:z}},[P,I,T,E,Ee,n]),oe=V.scrollHeight,he=V.start,Se=V.end,Pe=V.offset;ce.current.start=he,ce.current.end=Se;var nt=t.useState({width:0,height:n}),ke=D(nt,2),K=ke[0],at=ke[1],ot=function(o){at({width:o.width||o.offsetWidth,height:o.height||o.offsetHeight})},Oe=t.useRef(),$e=t.useRef(),it=t.useMemo(function(){return Je(K.width,h)},[K.width,h]),lt=t.useMemo(function(){return Je(K.height,oe)},[K.height,oe]),we=oe-n,ze=t.useRef(we);ze.current=we;function ut(a){var o=a;return Number.isNaN(ze.current)||(o=Math.min(o,ze.current)),o=Math.max(o,0),o}var Ne=T<=0,Ye=T>=we,ct=rt(Ne,Ye),_e=function(){return{x:k?-re:re,y:T}},Le=t.useRef(_e()),De=Ge(function(){if(H){var a=_e();(Le.current.x!==a.x||Le.current.y!==a.y)&&(H(a),Le.current=a)}});function Fe(a,o){var b=a;o?(Ke.flushSync(function(){q(b)}),De()):N(b)}function st(a){var o=a.currentTarget.scrollTop;o!==T&&N(o),y==null||y(a),De()}var He=function(o){var b=o,z=h-K.width;return b=Math.max(b,0),b=Math.min(b,z),b},ft=Ge(function(a,o){o?(Ke.flushSync(function(){q(function(b){var z=b+(k?-a:a);return He(z)})}),De()):N(function(b){var z=b+a;return z})}),vt=Tt(I,Ne,Ye,!!h,ft),We=D(vt,2),Te=We[0],Xe=We[1];It(I,$,function(a,o){return ct(a,o)?!1:(Te({preventDefault:function(){},deltaY:a}),!0)}),Re(function(){function a(b){I&&b.preventDefault()}var o=$.current;return o.addEventListener("wheel",Te),o.addEventListener("DOMMouseScroll",Xe),o.addEventListener("MozMousePixelScroll",a),function(){o.removeEventListener("wheel",Te),o.removeEventListener("DOMMouseScroll",Xe),o.removeEventListener("MozMousePixelScroll",a)}},[I]),Re(function(){h&&q(function(a){return He(a)})},[K.width,h]);var Ve=function(){var o,b;(o=Oe.current)===null||o===void 0||o.delayHidden(),(b=$e.current)===null||b===void 0||b.delayHidden()},Be=Lt($,E,ae,u,w,function(){return de(!0)},N,Ve);t.useImperativeHandle(s,function(){return{getScrollInfo:_e,scrollTo:function(o){function b(z){return z&&Ie(z)==="object"&&("left"in z||"top"in z)}b(o)?(o.left!==void 0&&q(He(o.left)),Be(o.top)):Be(o)}}}),Re(function(){if(_){var a=E.slice(he,Se+1);_(a,E)}},[he,Se,E]);var dt=kt(E,w,ae,u),ht=X==null?void 0:X({start:he,end:Se,virtual:P,offsetX:re,offsetY:Pe,rtl:k,getSize:dt}),St=Et(E,he,Se,h,ve,r,L),me=null;n&&(me=Y(C({},m?"height":"maxHeight",n),Nt),I&&(me.overflowY="hidden",h&&(me.overflowX="hidden"),be&&(me.pointerEvents="none")));var je={};return k&&(je.dir="rtl"),t.createElement("div",Qe({style:Y(Y({},M),{},{position:"relative"}),className:Q},je,j),t.createElement(et,{onResize:ot},t.createElement(p,{className:"".concat(l,"-holder"),style:me,ref:$,onScroll:st,onMouseEnter:Ve},t.createElement(tt,{prefixCls:l,height:oe,offsetX:re,offsetY:Pe,scrollWidth:h,onInnerResize:de,ref:ee,innerProps:W,rtl:k,extra:ht},St))),P&&oe>n&&t.createElement(Ze,{ref:Oe,prefixCls:l,scrollOffset:T,scrollRange:oe,rtl:k,onScroll:Fe,onStartMove:O,onStopMove:F,spinSize:lt,containerSize:K.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb}),P&&h>K.width&&t.createElement(Ze,{ref:$e,prefixCls:l,scrollOffset:re,scrollRange:h,rtl:k,onScroll:Fe,onStartMove:O,onStopMove:F,spinSize:it,containerSize:K.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb}))}var Ft=t.forwardRef(Yt);Ft.displayName="List";export{Ft as L};
