import{_ as s,a as i,o as a,W as e}from"./chunks/framework.CJwJD4JI.js";const t="/kit/assets/1557919507.CoYE60Ga.png",l="/kit/assets/1834894873.BQNvMQ12.png",o="/kit/assets/1748340718.CJmDP8CS.png",n="/kit/assets/1897527117.kKapDH3p.png",d="/kit/assets/1910899608.CBI9p3Ae.png",v=JSON.parse('{"title":"window11部署WSL2时，在已经开启虚拟化的情况下还是遇到0x80370102问题，提示开启虚拟化","description":"","frontmatter":{"title":"window11部署WSL2时，在已经开启虚拟化的情况下还是遇到0x80370102问题，提示开启虚拟化","categories":"杂谈日记","date":"2023-03-11 15:17","tags":["wsl"]},"headers":[],"relativePath":"posts/杂谈日记/2023/window11部署WSL2时，在已经开启虚拟化的情况下还是遇到0x80370102问题，提示开启虚拟化.md","filePath":"posts/杂谈/6.window11部署WSL2时，在已经开启虚拟化的情况下还是遇到0x80370102问题，提示开启虚拟化/README.md","lastUpdated":1723020021000}'),p={name:"posts/杂谈日记/2023/window11部署WSL2时，在已经开启虚拟化的情况下还是遇到0x80370102问题，提示开启虚拟化.md"},r=e('<h1 id="简介" tabindex="-1">简介 <a class="header-anchor" href="#简介" aria-label="Permalink to &quot;简介&quot;">​</a></h1><p>WSL (Windows Subsystem for Linux) 是 Windows 操作系统中的一个功能，它允许用户在 Windows 中运行 Linux 环境。WSL 的存在使得 Windows 用户可以使用 Linux 的工具和命令行界面，而无需在系统中安装另一个操作系统或虚拟机。 使用 WSL，用户可以在 Windows 操作系统上运行各种 Linux 应用程序、工具和开发环境，如 Bash、vim、git、Node.js、Docker 等等。WSL 可以帮助 Windows 用户更加方便地进行开发、测试和部署，也让他们更容易地获得 Linux 的强大功能和灵活性，而无需离开 Windows 系统。</p><p>现在我想安装 wsl 主要是为了使用 linux 的<code>rm</code>命令，可以很方便的删除文件，window 的删除文件功能太慢了。</p><h1 id="wsl2-安装步骤" tabindex="-1">WSL2 安装步骤 <a class="header-anchor" href="#wsl2-安装步骤" aria-label="Permalink to &quot;WSL2 安装步骤&quot;">​</a></h1><p>接下来简单说一下 wsl 的安装步骤：</p><ol><li>在 Windows 10 系统的“控制面板”中，点击“程序和功能”，然后点击“启用或关闭 Windows 功能”。</li><li>勾选“适用于 Linux 的 Windows 子系统”（Windows Subsystem for Linux）选项，点击“确定”并等待安装完成。</li><li>在 Microsoft Store 中搜索并下载适用于 WSL 2 的 Linux 发行版，例如 Ubuntu、Debian 或 Fedora。</li><li>打开 Windows Terminal 或命令提示符，运行以下命令启用 WSL 2：</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dism.exe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart</span></span></code></pre></div><ol start="5"><li>在 Microsoft Store 中下载并安装适用于 WSL 2 的 Linux 内核更新包。</li><li>运行以下命令设置 WSL 2 为默认版本：</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wsl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --set-default-version</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span></code></pre></div><ol start="7"><li>运行以下命令以在 WSL 2 中安装所需的 Linux 发行版：</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wsl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DistributionNam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>其中，<code>&lt;DistributionName&gt;</code> 是要安装的 Linux 发行版的名称，例如 Ubuntu、Debian 或 Fedora。</p><h1 id="遇到问题及处理问题" tabindex="-1">遇到问题及处理问题 <a class="header-anchor" href="#遇到问题及处理问题" aria-label="Permalink to &quot;遇到问题及处理问题&quot;">​</a></h1><p>根据上面的步骤，我启用了 wsl2，也在应用商店中安装了 ubuntu，但是在启用 ubuntu 的时候却出现了问题。 <img src="'+t+'" alt=""> 上面这张图片就是遇到的问题，提醒<code>Please enable the Virtual Machine Platform Windows feature and ensure virtualization is enabled in the BIOS</code>。 意思是我需要开启<code>虚拟机平台</code>，并且在 bios 中开启<code>虚拟化功能</code>。</p><p>但是我去检查的时候发现这两个条件我已经完成了，可以在任务管理器查看是否开启了虚拟化功能： <img src="'+l+'" alt=""> 功能里面也勾选了虚拟机平台： <img src="'+o+'" alt=""> 这样报错就很不合理了。</p><p>之后我在网络寻求解决方案，说是是需要开启功能 hyper-v。</p><blockquote><p>问题解决方案来自：<a href="https://blog.csdn.net/qq_39757730/article/details/117431647" target="_blank" rel="noreferrer">https://blog.csdn.net/qq_39757730/article/details/117431647</a></p></blockquote><p>于是我开启了 hyper-v 功能和虚拟机监控程序平台。 <img src="'+n+'" alt=""><img src="'+d+'" alt=""></p><p>再次启动 wsl ubuntu 系统，wsl 成功启动。</p><h1 id="再次无法启动-wsl" tabindex="-1">再次无法启动 wsl <a class="header-anchor" href="#再次无法启动-wsl" aria-label="Permalink to &quot;再次无法启动 wsl&quot;">​</a></h1><p>过了一段时间 wsl 无法开启，发现<code>hyper-v</code>和<code>虚拟机监控程序平台功能</code>被取消掉，怀疑可能是安装了虚拟机软件造成的。 于是再次勾选<code>hyper-v</code>和<code>虚拟机监控程序平台功能</code>两个选项，重启后发现还是无法开启 wsl。 于是网上找方法，执行下面的命令：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bcdedit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /set hypervisorlaunchtype auto</span></span></code></pre></div><p>然后重启电脑后 wsl 正常使用。</p><h1 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h1><ol><li>在 bios 中开启虚拟化支持，可以搜索相关主板的操作方法。</li><li>在<code>启动和关闭windows功能</code>中启用<code>hyper-v</code>和<code>虚拟机监控程序平台功能</code>。</li><li>安装一些软件比如 android 模拟器，可能会导致虚拟话功能关闭，执行<code>bcdedit /set hypervisorlaunchtype auto</code>解决。</li></ol>',25),h=[r];function c(u,k,b,g,m,w){return a(),i("div",null,h)}const y=s(p,[["render",c]]);export{v as __pageData,y as default};
